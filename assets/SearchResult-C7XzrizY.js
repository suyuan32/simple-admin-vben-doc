import{u as I,f as te,g as oe,h as _,i as ne,P as le,t as ie,j as me,k as F,l as A,m as ue,n as U,p as o,q as se,R as P,s as ae,v as re,x as ce,C as he,y as de,z as pe,A as ge,B as ve,D as Ce,E as k,F as ye,G as ze,H as fe,I as T,J as $,K as Be}from"./app-B9i7bvnE.js";const we=["/","/guide/","/zh/","/guide/tutorial/","/guide/components/","/zh/guide/","/guide/tutorial/Advanced/cors.html","/guide/tutorial/Advanced/i18n.html","/guide/tutorial/Advanced/icon.html","/guide/tutorial/Advanced/lint.html","/guide/tutorial/Basic/1-index.html","/guide/tutorial/Basic/10-deploy.html","/guide/tutorial/Basic/11-electron.html","/guide/tutorial/Basic/2-settings.html","/guide/tutorial/Basic/3-router.html","/guide/tutorial/Basic/4-menu.html","/guide/tutorial/Basic/5-auth.html","/guide/tutorial/Basic/6-mock.html","/guide/tutorial/Basic/7-component.html","/guide/tutorial/Basic/8-design.html","/guide/tutorial/Basic/9-lib.html","/guide/tutorial/Other/doubt.html","/guide/tutorial/Other/faq.html","/guide/tutorial/Other/server.html","/guide/components/Common/auth.html","/guide/components/Common/basic.html","/guide/components/Common/click-out-side.html","/guide/components/Common/code-editor.html","/guide/components/Common/count-down.html","/guide/components/Common/count-to.html","/guide/components/Common/cropper.html","/guide/components/Common/desc.html","/guide/components/Common/drawer.html","/guide/components/Common/excel.html","/guide/components/Common/flow-chart.html","/guide/components/Common/form.html","/guide/components/Common/icon.html","/guide/components/Common/json-preview.html","/guide/components/Common/loading.html","/guide/components/Common/markdown.html","/guide/components/Common/modal.html","/guide/components/Common/page.html","/guide/components/Common/pop-confirm-button.html","/guide/components/Common/qrcode.html","/guide/components/Common/strength-meter.html","/guide/components/Common/table.html","/guide/components/Common/time.html","/guide/components/Common/tinymce.html","/guide/components/Common/transition.html","/guide/components/Common/tree.html","/guide/components/Common/upload.html","/guide/components/Common/verify.html","/guide/components/Common/virtual-scroll.html","/guide/components/Common/vxetable.html","/guide/components/Functional/context-menu.html","/guide/components/Functional/preview.html","/guide/components/Global/button.html","/zh/guide/components/","/zh/guide/tutorial/","/guide/components/Common/Container/collapse-container.html","/guide/components/Common/Container/lazy-container.html","/guide/components/Common/Container/scroll-container.html","/zh/guide/components/Common/auth.html","/zh/guide/components/Common/basic.html","/zh/guide/components/Common/click-out-side.html","/zh/guide/components/Common/code-editor.html","/zh/guide/components/Common/count-down.html","/zh/guide/components/Common/count-to.html","/zh/guide/components/Common/cropper.html","/zh/guide/components/Common/desc.html","/zh/guide/components/Common/drawer.html","/zh/guide/components/Common/excel.html","/zh/guide/components/Common/flow-chart.html","/zh/guide/components/Common/form.html","/zh/guide/components/Common/icon.html","/zh/guide/components/Common/json-preview.html","/zh/guide/components/Common/loading.html","/zh/guide/components/Common/markdown.html","/zh/guide/components/Common/modal.html","/zh/guide/components/Common/page.html","/zh/guide/components/Common/pop-confirm-button.html","/zh/guide/components/Common/qrcode.html","/zh/guide/components/Common/strength-meter.html","/zh/guide/components/Common/table.html","/zh/guide/components/Common/time.html","/zh/guide/components/Common/tinymce.html","/zh/guide/components/Common/transition.html","/zh/guide/components/Common/tree.html","/zh/guide/components/Common/upload.html","/zh/guide/components/Common/verify.html","/zh/guide/components/Common/virtual-scroll.html","/zh/guide/components/Common/vxetable.html","/zh/guide/components/Functional/context-menu.html","/zh/guide/components/Functional/preview.html","/zh/guide/components/Global/button.html","/zh/guide/tutorial/Advanced/cors.html","/zh/guide/tutorial/Advanced/i18n.html","/zh/guide/tutorial/Advanced/icon.html","/zh/guide/tutorial/Advanced/lint.html","/zh/guide/tutorial/Basic/1-index.html","/zh/guide/tutorial/Basic/10-deploy.html","/zh/guide/tutorial/Basic/11-electron.html","/zh/guide/tutorial/Basic/2-settings.html","/zh/guide/tutorial/Basic/3-router.html","/zh/guide/tutorial/Basic/4-menu.html","/zh/guide/tutorial/Basic/5-auth.html","/zh/guide/tutorial/Basic/6-mock.html","/zh/guide/tutorial/Basic/7-component.html","/zh/guide/tutorial/Basic/8-design.html","/zh/guide/tutorial/Basic/9-lib.html","/zh/guide/tutorial/Other/doubt.html","/zh/guide/tutorial/Other/faq.html","/zh/guide/tutorial/Other/server.html","/zh/guide/components/Common/%E5%AE%B9%E5%99%A8/collapse-container.html","/zh/guide/components/Common/%E5%AE%B9%E5%99%A8/lazy-container.html","/zh/guide/components/Common/%E5%AE%B9%E5%99%A8/scroll-container.html","/404.html","/guide/tutorial/Advanced/","/guide/tutorial/Basic/","/guide/tutorial/Other/","/guide/components/Common/","/guide/components/Functional/","/guide/components/Global/","/guide/components/Common/Container/","/zh/guide/components/Common/","/zh/guide/components/Functional/","/zh/guide/components/Global/","/zh/guide/tutorial/Advanced/","/zh/guide/tutorial/Basic/","/zh/guide/tutorial/Other/","/zh/guide/components/Common/%E5%AE%B9%E5%99%A8/"],be="SEARCH_PRO_QUERY_HISTORY",C=I(be,[]),Ae=()=>{const{queryHistoryCount:n}=k,l=n>0;return{enabled:l,queryHistory:C,addQueryHistory:i=>{l&&(C.value=Array.from(new Set([i,...C.value.slice(0,n-1)])))},removeQueryHistory:i=>{C.value=[...C.value.slice(0,i),...C.value.slice(i+1)]}}},S=n=>we[n.id]+("anchor"in n?`#${n.anchor}`:""),ke="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:G}=k,y=I(ke,[]),He=()=>{const n=G>0;return{enabled:n,resultHistory:y,addResultHistory:l=>{if(n){const i={link:S(l),display:l.display};"header"in l&&(i.header=l.header),y.value=[i,...y.value.slice(0,G-1)]}},removeResultHistory:l=>{y.value=[...y.value.slice(0,l),...y.value.slice(l+1)]}}},xe=n=>{const l=he(),i=_(),H=de(),u=F(0),B=A(()=>u.value>0),p=pe([]);return ge(()=>{const{search:g,terminate:x}=ve(),z=Ce(r=>{const f=r.join(" "),{searchFilter:R=d=>d,splitWord:E,suggestionsFilter:D,...v}=l.value;f?(u.value+=1,g(r.join(" "),i.value,v).then(d=>R(d,f,i.value,H.value)).then(d=>{u.value-=1,p.value=d}).catch(d=>{console.warn(d),u.value-=1,u.value||(p.value=[])})):p.value=[]},k.searchDelay-k.suggestDelay);U([n,i],([r])=>z(r),{immediate:!0}),ye(()=>{x()})}),{isSearching:B,results:p}};var Ee=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(n,{emit:l}){const i=oe(),H=_(),u=ne(le),{enabled:B,addQueryHistory:p,queryHistory:g,removeQueryHistory:x}=Ae(),{enabled:z,resultHistory:r,addResultHistory:f,removeResultHistory:R}=He(),E=B||z,D=ie(n,"queries"),{results:v,isSearching:d}=xe(D),m=me({isQuery:!0,index:0}),c=F(0),h=F(0),L=A(()=>E&&(g.value.length>0||r.value.length>0)),q=A(()=>v.value.length>0),Q=A(()=>v.value[c.value]||null),Y=()=>{const{isQuery:e,index:t}=m;t===0?(m.isQuery=!e,m.index=e?r.value.length-1:g.value.length-1):m.index=t-1},M=()=>{const{isQuery:e,index:t}=m;t===(e?g.value.length-1:r.value.length-1)?(m.isQuery=!e,m.index=0):m.index=t+1},J=()=>{c.value=c.value>0?c.value-1:v.value.length-1,h.value=Q.value.contents.length-1},K=()=>{c.value=c.value<v.value.length-1?c.value+1:0,h.value=0},V=()=>{h.value<Q.value.contents.length-1?h.value+=1:K()},N=()=>{h.value>0?h.value-=1:J()},O=e=>e.map(t=>Be(t)?t:o(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ze[e.index]||"$content",[s,b=""]=fe(t)?t[H.value].split("$content"):t.split("$content");return e.display.map(a=>o("div",O([s,...a,b])))}return e.display.map(t=>o("div",O(t)))},w=()=>{c.value=0,h.value=0,l("updateQuery",""),l("close")},X=()=>B?o("ul",{class:"search-pro-result-list"},o("li",{class:"search-pro-result-list-item"},[o("div",{class:"search-pro-result-title"},u.value.queryHistory),g.value.map((e,t)=>o("div",{class:["search-pro-result-item",{active:m.isQuery&&m.index===t}],onClick:()=>{l("updateQuery",e)}},[o(T,{class:"search-pro-result-type"}),o("div",{class:"search-pro-result-content"},e),o("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:s=>{s.preventDefault(),s.stopPropagation(),x(t)}})]))])):null,Z=()=>z?o("ul",{class:"search-pro-result-list"},o("li",{class:"search-pro-result-list-item"},[o("div",{class:"search-pro-result-title"},u.value.resultHistory),r.value.map((e,t)=>o(P,{to:e.link,class:["search-pro-result-item",{active:!m.isQuery&&m.index===t}],onClick:()=>{w()}},()=>[o(T,{class:"search-pro-result-type"}),o("div",{class:"search-pro-result-content"},[e.header?o("div",{class:"content-header"},e.header):null,o("div",e.display.map(s=>O(s)).flat())]),o("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:s=>{s.preventDefault(),s.stopPropagation(),R(t)}})]))])):null;return ue("keydown",e=>{if(n.isFocusing){if(q.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=Q.value.contents[h.value];p(n.queries.join(" ")),f(t),i.push(S(t)),w()}}else if(z){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")M();else if(e.key==="Enter"){const{index:t}=m;m.isQuery?(l("updateQuery",g.value[t]),e.preventDefault()):(i.push(r.value[t].link),w())}}}}),U([c,h],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>o("div",{class:["search-pro-result-wrapper",{empty:n.queries.length?!q.value:!L.value}],id:"search-pro-results"},n.queries.length?d.value?o(se,{hint:u.value.searching}):q.value?o("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:t},s)=>{const b=c.value===s;return o("li",{class:["search-pro-result-list-item",{active:b}]},[o("div",{class:"search-pro-result-title"},e||u.value.defaultTitle),t.map((a,ee)=>{const j=b&&h.value===ee;return o(P,{to:S(a),class:["search-pro-result-item",{active:j,"aria-selected":j}],onClick:()=>{p(n.queries.join(" ")),f(a),w()}},()=>[a.type==="text"?null:o(a.type==="title"?ae:a.type==="heading"?re:ce,{class:"search-pro-result-type"}),o("div",{class:"search-pro-result-content"},[a.type==="text"&&a.header?o("div",{class:"content-header"},a.header):null,o("div",W(a))])])})])})):u.value.emptyResult:E?L.value?[X(),Z()]:u.value.emptyHistory:u.value.emptyResult)}});export{Ee as default};
